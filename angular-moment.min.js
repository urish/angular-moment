angular.module("angularMoment",[]).directive("amTimeAgo",["$window","$timeout",function(d,b){return function(c,n,m){function g(){e&&(b.cancel(e),e=null)}function h(a){n.text(a.fromNow());var c=d.moment().diff(a,"minute"),f=3600;1>c?f=1:60>c?f=30:180>c&&(f=300);e=b(function(){h(a)},1E3*f,!1)}var e=null,k,l;c.$watch(m.amTimeAgo,function(a){"undefined"!==typeof a&&null!==a&&(angular.isNumber(a)&&(a=new Date(a)),k=a,g(),h(d.moment(k,l)))});m.$observe("amFormat",function(a){l=a;g();h(d.moment(k,l))}); c.$on("$destroy",function(){g()})}}]).filter("amDateFormat",["$window",function(d){return function(b,c){if("undefined"===typeof b||null===b)return"";!isNaN(parseFloat(b))&&isFinite(b)&&(b=new Date(parseInt(b,null)));return d.moment(b).format(c)}}]);